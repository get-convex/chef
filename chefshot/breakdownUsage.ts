const exampleData = {
  aggregationCharts: [],
  aggregationSummaries: [],
  datasetId: 'flex',
  colors: {
    '': {
      dark: '#3b9eff',
      light: '#0588f0',
    },
  },
  id: '1',
  hasResults: true,
  totals: [],
  matches: [
    {
      _rowId: '0d9fkbhabx2f4-07d1cdd4f8001c70-0000b229',
      _id: '6868665bc042a514ac9273a6e7b62c22-0',
      _sysTime: '2025-04-25T08:06:14.214981287Z',
      _time: '2025-04-25T08:04:57.094Z',
      data: {
        'attributes.custom': {
          'usage.completionTokens': 9614,
          'usage.promptTokens': 17973,
          'usage.totalTokens': 27587,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'stop',
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '26.069µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '223526819a20b2f7',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '56d69e759e17ab6f0bcecb862e5f5577',
        trace_state: null,
        totalTokens: 27587,
        completionTokens: 9614,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkbqu9wybk-07d1d83cd8003313-0000abe3',
      _id: '6868665bc042a514ac9273a6e7b62c22-1',
      _sysTime: '2025-04-25T08:05:18.407096445Z',
      _time: '2025-04-25T08:05:17.891Z',
      data: {
        'attributes.custom': {
          finishReason: 'tool-calls',
          'usage.completionTokens': 72,
          'usage.promptTokens': 31594,
          'usage.totalTokens': 31666,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '23.121µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: 'da0b1228085f1ffd',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '24ae83edc4e8a9d0c03d40404d008893',
        trace_state: null,
        totalTokens: 31666,
        completionTokens: 72,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkc3jzholc-07d1f3c712005ad5-00009acf',
      _id: '6868665bc042a514ac9273a6e7b62c22-2',
      _sysTime: '2025-04-25T08:05:48.96040064Z',
      _time: '2025-04-25T08:05:45.567Z',
      data: {
        'attributes.custom': {
          'usage.completionTokens': 2372,
          'usage.promptTokens': 31929,
          'usage.totalTokens': 34301,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'tool-calls',
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '24.95µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: 'b1f84d742a1ca5ae',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: 'b770b859569f8d97f7c33c2c0da42b59',
        trace_state: null,
        totalTokens: 34301,
        completionTokens: 2372,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkchrxargg-07d1cdd4f8001c70-0000b22b',
      _id: '6868665bc042a514ac9273a6e7b62c22-3',
      _sysTime: '2025-04-25T08:06:20.769844741Z',
      _time: '2025-04-25T08:06:16.522Z',
      data: {
        'attributes.custom': {
          'usage.promptTokens': 35270,
          'usage.totalTokens': 37733,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'tool-calls',
          'usage.completionTokens': 2463,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '63.65µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: 'd8ec7ec11ef6387e',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: 'd19e202f26b0e3d37e5b65128609adbd',
        trace_state: null,
        totalTokens: 37733,
        completionTokens: 2463,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkcq40d328-07d1d83cd8003313-0000ac1c',
      _id: '6868665bc042a514ac9273a6e7b62c22-4',
      _sysTime: '2025-04-25T08:08:25.758503954Z',
      _time: '2025-04-25T08:06:34.667Z',
      data: {
        'attributes.custom': {
          'usage.totalTokens': 28743,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'tool-calls',
          'usage.completionTokens': 1082,
          'usage.promptTokens': 27661,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '21.936µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: 'c1df97ea69f320db',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '117de372ea8565242c76e9afe45cc445',
        trace_state: null,
        totalTokens: 28743,
        completionTokens: 1082,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkd4r44nnk-07d1d83cd8003313-0000ac04',
      _id: '6868665bc042a514ac9273a6e7b62c22-5',
      _sysTime: '2025-04-25T08:07:08.496647057Z',
      _time: '2025-04-25T08:07:06.539Z',
      data: {
        'attributes.custom': {
          'usage.completionTokens': 2511,
          'usage.promptTokens': 28379,
          'usage.totalTokens': 30890,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'tool-calls',
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '23.03µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: 'f3edb499cbdd69cd',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '02457a74031a2d955a2e60b6e277eb76',
        trace_state: null,
        totalTokens: 30890,
        completionTokens: 2511,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkdhbny56o-07d1f3c712005ad5-00009ae9',
      _id: '6868665bc042a514ac9273a6e7b62c22-6',
      _sysTime: '2025-04-25T08:07:34.413116477Z',
      _time: '2025-04-25T08:07:33.903Z',
      data: {
        'attributes.custom': {
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'stop',
          'usage.completionTokens': 1837,
          'usage.promptTokens': 29193,
          'usage.totalTokens': 31030,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '29.69µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '2b2bfd63b5cb4ced',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: 'e1cf18fe265606e4cc465417ceb7ce49',
        trace_state: null,
        totalTokens: 31030,
        completionTokens: 1837,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkdj1rktq8-07d1f3c712005ad5-00009aec',
      _id: '6868665bc042a514ac9273a6e7b62c22-7',
      _sysTime: '2025-04-25T08:07:39.069776958Z',
      _time: '2025-04-25T08:07:37.658Z',
      data: {
        'attributes.custom': {
          'usage.completionTokens': 62,
          'usage.promptTokens': 32092,
          'usage.totalTokens': 32154,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'stop',
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '24.57µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '1086da96a4ae16b6',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '6de0fbb3a86834c2deafdc3604ef8ce4',
        trace_state: null,
        totalTokens: 32154,
        completionTokens: 62,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkdkf2zfnk-07d1f3c712005ad5-00009af2',
      _id: '6868665bc042a514ac9273a6e7b62c22-8',
      _sysTime: '2025-04-25T08:07:50.039288113Z',
      _time: '2025-04-25T08:07:40.64Z',
      data: {
        'attributes.custom': {
          'usage.completionTokens': 65,
          'usage.promptTokens': 32102,
          'usage.totalTokens': 32167,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'tool-calls',
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '55.684µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '992c6e24b9a93528',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '66651a8dc14d983df4bbeea79c33a153',
        trace_state: null,
        totalTokens: 32167,
        completionTokens: 65,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkdsfh4akg-07d1d83cd8003313-0000ac15',
      _id: '6868665bc042a514ac9273a6e7b62c22-9',
      _sysTime: '2025-04-25T08:07:58.592111475Z',
      _time: '2025-04-25T08:07:58.078Z',
      data: {
        'attributes.custom': {
          'usage.promptTokens': 32396,
          'usage.totalTokens': 33245,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'stop',
          'usage.completionTokens': 849,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '30.445µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: 'c7e56d5a3ef32097',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '1883fbc366e676813e90d281ef1a816e',
        trace_state: null,
        totalTokens: 33245,
        completionTokens: 849,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkdu6jvjsw-07d1cdd4f8001c70-0000b24d',
      _id: '6868665bc042a514ac9273a6e7b62c22-10',
      _sysTime: '2025-04-25T08:08:04.198600437Z',
      _time: '2025-04-25T08:08:01.892Z',
      data: {
        'attributes.custom': {
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'stop',
          'usage.completionTokens': 168,
          'usage.promptTokens': 31677,
          'usage.totalTokens': 31845,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '27.43µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '35ce2961898ca77e',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '882208688632f10fb49575759721674b',
        trace_state: null,
        totalTokens: 31845,
        completionTokens: 168,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkerr2ueo0-07d1d83cd8003313-0000ac2e',
      _id: '6868665bc042a514ac9273a6e7b62c22-11',
      _sysTime: '2025-04-25T08:09:15.478371278Z',
      _time: '2025-04-25T08:09:14.967Z',
      data: {
        'attributes.custom': {
          finishReason: 'stop',
          'usage.completionTokens': 74,
          'usage.promptTokens': 31711,
          'usage.totalTokens': 31785,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '84.128µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: 'a091ebd93a3cafe7',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: 'e8da68e46e1743799e7d7431a80586b0',
        trace_state: null,
        totalTokens: 31785,
        completionTokens: 74,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkf9jvt37k-07d1d83cd8003313-0000ac3e',
      _id: '6868665bc042a514ac9273a6e7b62c22-12',
      _sysTime: '2025-04-25T08:10:01.691602175Z',
      _time: '2025-04-25T08:09:53.714Z',
      data: {
        'attributes.custom': {
          'usage.promptTokens': 23956,
          'usage.totalTokens': 24288,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'tool-calls',
          'usage.completionTokens': 332,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '29.887µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: 'd97237ef782e1e91',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: 'f09254a32cc0fd48f01cf45836d029d4',
        trace_state: null,
        totalTokens: 24288,
        completionTokens: 332,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkfleomnuo-07d1f3c712005ad5-00009b1f',
      _id: '6868665bc042a514ac9273a6e7b62c22-13',
      _sysTime: '2025-04-25T08:10:20.053309948Z',
      _time: '2025-04-25T08:10:19.521Z',
      data: {
        'attributes.custom': {
          'usage.completionTokens': 1819,
          'usage.promptTokens': 24299,
          'usage.totalTokens': 26118,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'tool-calls',
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '25.883µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: 'f4530f0ae9e97881',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: 'b4b641529f2dd984c6300fdbd5e70f19',
        trace_state: null,
        totalTokens: 26118,
        completionTokens: 1819,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkfzfqrf28-07d1f3c712005ad5-00009b2c',
      _id: '6868665bc042a514ac9273a6e7b62c22-14',
      _sysTime: '2025-04-25T08:10:50.588513686Z',
      _time: '2025-04-25T08:10:50.06Z',
      data: {
        'attributes.custom': {
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'tool-calls',
          'usage.completionTokens': 2529,
          'usage.promptTokens': 27714,
          'usage.totalTokens': 30243,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '28.457µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: 'aa3d13f5c5ecc5ba',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '6557ba15eceafe982ec00f4e6c68bd5c',
        trace_state: null,
        totalTokens: 30243,
        completionTokens: 2529,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkgbbgbtz4-07d1d83cd8003313-0000ac5b',
      _id: '6868665bc042a514ac9273a6e7b62c22-15',
      _sysTime: '2025-04-25T08:11:16.526372864Z',
      _time: '2025-04-25T08:11:15.922Z',
      data: {
        'attributes.custom': {
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'stop',
          'usage.completionTokens': 450,
          'usage.promptTokens': 14447,
          'usage.totalTokens': 14897,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '28.18µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '19f9038b01842976',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: 'cea6a9adcf91a2013e47747e92f69cc6',
        trace_state: null,
        totalTokens: 14897,
        completionTokens: 450,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkinj2db7k-07d1d83cd8003313-0000ac96',
      _id: '6868665bc042a514ac9273a6e7b62c22-16',
      _sysTime: '2025-04-25T08:14:20.446914661Z',
      _time: '2025-04-25T08:14:19.232Z',
      data: {
        'attributes.custom': {
          'usage.completionTokens': 7213,
          'usage.promptTokens': 29714,
          'usage.totalTokens': 36927,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'tool-calls',
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '27.845µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '45ca5bc032c7cfcb',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: 'b786bd81bac3c47fec133dc2216d38ef',
        trace_state: null,
        totalTokens: 36927,
        completionTokens: 7213,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkj0ic2l4w-07d1cdd4f8001c70-0000b2dd',
      _id: '6868665bc042a514ac9273a6e7b62c22-17',
      _sysTime: '2025-04-25T08:14:56.586637602Z',
      _time: '2025-04-25T08:14:47.486Z',
      data: {
        'attributes.custom': {
          'usage.totalTokens': 30035,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'tool-calls',
          'usage.completionTokens': 2993,
          'usage.promptTokens': 27042,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '28.576µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: 'd9865957e1280205',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '3516001bc1e6f02b5534954348eb7fb8',
        trace_state: null,
        totalTokens: 30035,
        completionTokens: 2993,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkjrwhn000-07d1f3c712005ad5-00009ba7',
      _id: '6868665bc042a514ac9273a6e7b62c22-18',
      _sysTime: '2025-04-25T08:15:51.726008429Z',
      _time: '2025-04-25T08:15:47.115Z',
      data: {
        'attributes.custom': {
          'usage.totalTokens': 36394,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'tool-calls',
          'usage.completionTokens': 6105,
          'usage.promptTokens': 30289,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '32.515µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '90631aa456643ce0',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '57e315237725b6ed5108a6e318ec5e7d',
        trace_state: null,
        totalTokens: 36394,
        completionTokens: 6105,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkkb59v2v4-07d1cdd4f8001c70-0000b2f7',
      _id: '6868665bc042a514ac9273a6e7b62c22-19',
      _sysTime: '2025-04-25T08:16:31.282128256Z',
      _time: '2025-04-25T08:16:29.005Z',
      data: {
        'attributes.custom': {
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'tool-calls',
          'usage.completionTokens': 5407,
          'usage.promptTokens': 39088,
          'usage.totalTokens': 44495,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '25.178µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '427a844e3207749d',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: 'f9b529fdc3055411dbf493c2bdd6214a',
        trace_state: null,
        totalTokens: 44495,
        completionTokens: 5407,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkkogj7mdc-07d1f3c712005ad5-00009bb5',
      _id: '6868665bc042a514ac9273a6e7b62c22-20',
      _sysTime: '2025-04-25T08:17:03.342632494Z',
      _time: '2025-04-25T08:16:57.984Z',
      data: {
        'attributes.custom': {
          'usage.totalTokens': 30021,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'stop',
          'usage.completionTokens': 513,
          'usage.promptTokens': 29508,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '25.047µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '8c49d2652e059a36',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '03b6ab439ae49b6e5ac689871d0011ba',
        trace_state: null,
        totalTokens: 30021,
        completionTokens: 513,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkm2xp5268-07d1cdd4f8001c70-0000b316',
      _id: '6868665bc042a514ac9273a6e7b62c22-21',
      _sysTime: '2025-04-25T08:18:48.955458945Z',
      _time: '2025-04-25T08:18:47.861Z',
      data: {
        'attributes.custom': {
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'tool-calls',
          'usage.completionTokens': 2123,
          'usage.promptTokens': 45351,
          'usage.totalTokens': 47474,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '60.279µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '4d0b50c5833a7e82',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '62d79d59af46569d032bbf9d8105525a',
        trace_state: null,
        totalTokens: 47474,
        completionTokens: 2123,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkmdj90npc-07d1d83cd8003313-0000ad01',
      _id: '6868665bc042a514ac9273a6e7b62c22-22',
      _sysTime: '2025-04-25T08:19:11.441874829Z',
      _time: '2025-04-25T08:19:10.932Z',
      data: {
        'attributes.custom': {
          'usage.promptTokens': 15913,
          'usage.totalTokens': 16170,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'stop',
          'usage.completionTokens': 257,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '36.136µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: 'c07fe2f9773b9508',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: 'a7f80021dd49141bae331ba9886307f6',
        trace_state: null,
        totalTokens: 16170,
        completionTokens: 257,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fknx4xjbsw-07d1cdd4f8001c70-0000b33b',
      _id: '6868665bc042a514ac9273a6e7b62c22-23',
      _sysTime: '2025-04-25T08:21:26.697531577Z',
      _time: '2025-04-25T08:21:11.966Z',
      data: {
        'attributes.custom': {
          'usage.completionTokens': 9402,
          'usage.promptTokens': 31068,
          'usage.totalTokens': 40470,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'tool-calls',
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '29.047µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: 'df17c13936d50aa6',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: 'd39d6674abde209db793e19f618694fb',
        trace_state: null,
        totalTokens: 40470,
        completionTokens: 9402,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fko9a4ujy8-07d1f3c712005ad5-00009bf6',
      _id: '6868665bc042a514ac9273a6e7b62c22-24',
      _sysTime: '2025-04-25T08:21:43.506179232Z',
      _time: '2025-04-25T08:21:38.402Z',
      data: {
        'attributes.custom': {
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'stop',
          'usage.completionTokens': 540,
          'usage.promptTokens': 25815,
          'usage.totalTokens': 26355,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '65.932µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '58baed314c25959a',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '239b886e225fbc9b3fe7e87c67ef60f4',
        trace_state: null,
        totalTokens: 26355,
        completionTokens: 540,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkp9acho74-07d1f3c712005ad5-00009c05',
      _id: '6868665bc042a514ac9273a6e7b62c22-25',
      _sysTime: '2025-04-25T08:22:58.762868058Z',
      _time: '2025-04-25T08:22:56.779Z',
      data: {
        'attributes.custom': {
          'usage.promptTokens': 41080,
          'usage.totalTokens': 49718,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'tool-calls',
          'usage.completionTokens': 8638,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '26.689µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '96483591a59fa287',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '546fa0cfd064e043180045386677475c',
        trace_state: null,
        totalTokens: 49718,
        completionTokens: 8638,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkpwnn6beo-07d1d83cd8003313-0000ad42',
      _id: '6868665bc042a514ac9273a6e7b62c22-26',
      _sysTime: '2025-04-25T08:23:48.158079311Z',
      _time: '2025-04-25T08:23:47.649Z',
      data: {
        'attributes.custom': {
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'tool-calls',
          'usage.completionTokens': 7285,
          'usage.promptTokens': 32618,
          'usage.totalTokens': 39903,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '72.597µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '51582c897d6e55b3',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '36b49435b25ca5f38f233a173c7df002',
        trace_state: null,
        totalTokens: 39903,
        completionTokens: 7285,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkq97zulog-07d1d83cd8003313-0000ad4b',
      _id: '6868665bc042a514ac9273a6e7b62c22-27',
      _sysTime: '2025-04-25T08:24:15.52146713Z',
      _time: '2025-04-25T08:24:15.001Z',
      data: {
        'attributes.custom': {
          finishReason: 'tool-calls',
          'usage.completionTokens': 1553,
          'usage.promptTokens': 38869,
          'usage.totalTokens': 40422,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '22.61µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '163a62aa607f00fa',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '47b084638342bd495f93673682f38ebc',
        trace_state: null,
        totalTokens: 40422,
        completionTokens: 1553,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkrxg2ff28-07d1d83cd8003313-0000ad6d',
      _id: '6868665bc042a514ac9273a6e7b62c22-28',
      _sysTime: '2025-04-25T08:26:27.301392876Z',
      _time: '2025-04-25T08:26:26.096Z',
      data: {
        'attributes.custom': {
          'usage.completionTokens': 14739,
          'usage.promptTokens': 25552,
          'usage.totalTokens': 40291,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'tool-calls',
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '24.559µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: 'e9a7df64b0c9aa05',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '2b6f7ae43f9d4d48cb8f11be2cd54bb1',
        trace_state: null,
        totalTokens: 40291,
        completionTokens: 14739,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fks1ibx14w-07d1d83cd8003313-0000ad6f',
      _id: '6868665bc042a514ac9273a6e7b62c22-29',
      _sysTime: '2025-04-25T08:26:37.174035565Z',
      _time: '2025-04-25T08:26:34.94Z',
      data: {
        'attributes.custom': {
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'tool-calls',
          'usage.completionTokens': 15,
          'usage.promptTokens': 46340,
          'usage.totalTokens': 46355,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '22.95µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '73d5bc2a95aff2ef',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '5325556a0048058d66c3446b16d2c8e0',
        trace_state: null,
        totalTokens: 46355,
        completionTokens: 15,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkt8qi8veo-07d1d83cd8003313-0000ad8b',
      _id: '6868665bc042a514ac9273a6e7b62c22-30',
      _sysTime: '2025-04-25T08:28:11.041292321Z',
      _time: '2025-04-25T08:28:09.036Z',
      data: {
        'attributes.custom': {
          'usage.totalTokens': 49890,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'tool-calls',
          'usage.completionTokens': 9832,
          'usage.promptTokens': 40058,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '60.4µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '488198e34871cdff',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '1cfa7038121d6e8d621358d9b9040f92',
        trace_state: null,
        totalTokens: 49890,
        completionTokens: 9832,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkttrr8mbk-07d1cdd4f8001c70-0000b395',
      _id: '6868665bc042a514ac9273a6e7b62c22-31',
      _sysTime: '2025-04-25T08:29:04.655836369Z',
      _time: '2025-04-25T08:28:54.824Z',
      data: {
        'attributes.custom': {
          finishReason: 'tool-calls',
          'usage.completionTokens': 18227,
          'usage.promptTokens': 24976,
          'usage.totalTokens': 43203,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '111.263µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '7bcbec9217f5c422',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '71aff03b7bf9643ba8257d449909be95',
        trace_state: null,
        totalTokens: 43203,
        completionTokens: 18227,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkua6lkscg-07d1cdd4f8001c70-0000b39b',
      _id: '6868665bc042a514ac9273a6e7b62c22-32',
      _sysTime: '2025-04-25T08:29:49.898463155Z',
      _time: '2025-04-25T08:29:30.55Z',
      data: {
        'attributes.custom': {
          'usage.completionTokens': 11287,
          'usage.promptTokens': 44668,
          'usage.totalTokens': 55955,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'tool-calls',
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '81.77µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: 'bc8f95f002155744',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '69a56fae80b0d3d6bf1fcaacde5f03c3',
        trace_state: null,
        totalTokens: 55955,
        completionTokens: 11287,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkup7gp08w-07d1d83cd8003313-0000adad',
      _id: '6868665bc042a514ac9273a6e7b62c22-33',
      _sysTime: '2025-04-25T08:30:04.235093659Z',
      _time: '2025-04-25T08:30:03.254Z',
      data: {
        'attributes.custom': {
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'tool-calls',
          'usage.completionTokens': 9059,
          'usage.promptTokens': 54469,
          'usage.totalTokens': 63528,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '33.306µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '73716002ec947893',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '20213f7fc21a581d7d671f3e22f02b3b',
        trace_state: null,
        totalTokens: 63528,
        completionTokens: 9059,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkw22ih8ao-07d1d83cd8003313-0000adc2',
      _id: '6868665bc042a514ac9273a6e7b62c22-34',
      _sysTime: '2025-04-25T08:31:50.499813662Z',
      _time: '2025-04-25T08:31:49.617Z',
      data: {
        'attributes.custom': {
          'usage.totalTokens': 60459,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'tool-calls',
          'usage.completionTokens': 18836,
          'usage.promptTokens': 41623,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '76.723µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '4db73cc1fcaaca17',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: 'bc2fbe1a2ae8c2d4ff3580d39f3ccc95',
        trace_state: null,
        totalTokens: 60459,
        completionTokens: 18836,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkxm39z83k-07d1d83cd8003313-0000add6',
      _id: '6868665bc042a514ac9273a6e7b62c22-35',
      _sysTime: '2025-04-25T08:33:52.082016293Z',
      _time: '2025-04-25T08:33:51.563Z',
      data: {
        'attributes.custom': {
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'stop',
          'usage.completionTokens': 18150,
          'usage.promptTokens': 46458,
          'usage.totalTokens': 64608,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '74.228µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '7394a2b19bfd1133',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: 'df480c6e1a5e0ebdfe4dcc762a4aeb9c',
        trace_state: null,
        totalTokens: 64608,
        completionTokens: 18150,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkychq4rwg-07d1f3c712005ad5-00009cc0',
      _id: '6868665bc042a514ac9273a6e7b62c22-36',
      _sysTime: '2025-04-25T08:34:49.580027689Z',
      _time: '2025-04-25T08:34:49.033Z',
      data: {
        'attributes.custom': {
          finishReason: 'stop',
          'usage.completionTokens': 7953,
          'usage.promptTokens': 46764,
          'usage.totalTokens': 54717,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '75.104µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: 'b5c577071c639253',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: 'b099563215c43b72e27b8c8e482c617f',
        trace_state: null,
        totalTokens: 54717,
        completionTokens: 7953,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fkz2rie340-07d1cdd4f8001c70-0000b3e5',
      _id: '6868665bc042a514ac9273a6e7b62c22-37',
      _sysTime: '2025-04-25T08:35:53.545309684Z',
      _time: '2025-04-25T08:35:46.221Z',
      data: {
        'attributes.custom': {
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'stop',
          'usage.completionTokens': 7953,
          'usage.promptTokens': 46764,
          'usage.totalTokens': 54717,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '75.67µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '8d27ef173ca26758',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '58d1f7d2ebeceb1ffad2ec93c4ef39ab',
        trace_state: null,
        totalTokens: 54717,
        completionTokens: 7953,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fl08rd485c-07d1cdd4f8001c70-0000b3f5',
      _id: '6868665bc042a514ac9273a6e7b62c22-38',
      _sysTime: '2025-04-25T08:37:19.42582342Z',
      _time: '2025-04-25T08:37:17.637Z',
      data: {
        'attributes.custom': {
          finishReason: 'tool-calls',
          'usage.completionTokens': 8171,
          'usage.promptTokens': 47276,
          'usage.totalTokens': 55447,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '28.872µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '5ce718c323a6c664',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '2c405ca6a23bc35b30dcb97d78bc0dd4',
        trace_state: null,
        totalTokens: 55447,
        completionTokens: 8171,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fl119t0kn4-07d1d83cd8003313-0000ae14',
      _id: '6868665bc042a514ac9273a6e7b62c22-39',
      _sysTime: '2025-04-25T08:38:20.320021892Z',
      _time: '2025-04-25T08:38:19.702Z',
      data: {
        'attributes.custom': {
          finishReason: 'stop',
          'usage.completionTokens': 7811,
          'usage.promptTokens': 35915,
          'usage.totalTokens': 43726,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '25.48µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '066270c62aa962a3',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '2f0450075d32a6b1f7cdf70b8dcf6a4e',
        trace_state: null,
        totalTokens: 43726,
        completionTokens: 7811,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fl2mmm2ssg-07d1f3c712005ad5-00009d01',
      _id: '6868665bc042a514ac9273a6e7b62c22-40',
      _sysTime: '2025-04-25T08:40:33.955875569Z',
      _time: '2025-04-25T08:40:24.553Z',
      data: {
        'attributes.custom': {
          'usage.promptTokens': 47276,
          'usage.totalTokens': 67276,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'length',
          'usage.completionTokens': 20000,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '39.167µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: 'd1fb8e894e9b0c47',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '9c812207303a27c4bf65fc278c7cf406',
        trace_state: null,
        totalTokens: 67276,
        completionTokens: 20000,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fl4jayclts-07d1f3c712005ad5-00009d2b',
      _id: '6868665bc042a514ac9273a6e7b62c22-41',
      _sysTime: '2025-04-25T08:42:57.080107271Z',
      _time: '2025-04-25T08:42:54.046Z',
      data: {
        'attributes.custom': {
          finishReason: 'length',
          'usage.completionTokens': 20000,
          'usage.promptTokens': 46129,
          'usage.totalTokens': 66129,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '24.38µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: 'b957ce77fe3d59d1',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '47cb28019411185b6debb77c9ea4cece',
        trace_state: null,
        totalTokens: 66129,
        completionTokens: 20000,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fl7sp49nr4-07d1f3c712005ad5-00009d68',
      _id: '6868665bc042a514ac9273a6e7b62c22-42',
      _sysTime: '2025-04-25T08:47:14.27675318Z',
      _time: '2025-04-25T08:47:09.586Z',
      data: {
        'attributes.custom': {
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'length',
          'usage.completionTokens': 20000,
          'usage.promptTokens': 57612,
          'usage.totalTokens': 77612,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '73.321µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '8b13812fd8934964',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: 'f904c9558dddf158b72a6587a54aa13f',
        trace_state: null,
        totalTokens: 77612,
        completionTokens: 20000,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9flkn98ks1s-07d1d83cd8003313-0000af11',
      _id: '6868665bc042a514ac9273a6e7b62c22-43',
      _sysTime: '2025-04-25T09:03:57.351966202Z',
      _time: '2025-04-25T09:03:56.476Z',
      data: {
        'attributes.custom': {
          'usage.totalTokens': 72220,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'stop',
          'usage.completionTokens': 12561,
          'usage.promptTokens': 59659,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '25.93µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: 'b8a5099c85bf615e',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '9703d5541c4c841dbc3a646ecb58ecd6',
        trace_state: null,
        totalTokens: 72220,
        completionTokens: 12561,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fllxifm22o-07d1f3c712005ad5-00009e29',
      _id: '6868665bc042a514ac9273a6e7b62c22-44',
      _sysTime: '2025-04-25T09:05:37.678207705Z',
      _time: '2025-04-25T09:05:37.164Z',
      data: {
        'attributes.custom': {
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'stop',
          'usage.completionTokens': 7987,
          'usage.promptTokens': 42438,
          'usage.totalTokens': 50425,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '31.37µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '336aff39886d3e48',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '365bdd1aad2c902693ddd411c2d4c3f8',
        trace_state: null,
        totalTokens: 50425,
        completionTokens: 7987,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fllz5yd48w-07d1cdd4f8001c70-0000b522',
      _id: '6868665bc042a514ac9273a6e7b62c22-45',
      _sysTime: '2025-04-25T09:05:41.294709676Z',
      _time: '2025-04-25T09:05:40.763Z',
      data: {
        'attributes.custom': {
          'usage.completionTokens': 111,
          'usage.promptTokens': 41537,
          'usage.totalTokens': 41648,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'stop',
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '33.08µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '4bc46c3fb5540526',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '3fe75f825669d3b9cffebd4c1bc0ff04',
        trace_state: null,
        totalTokens: 41648,
        completionTokens: 111,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9flm8o6fx8g-07d1d83cd8003313-0000af25',
      _id: '6868665bc042a514ac9273a6e7b62c22-46',
      _sysTime: '2025-04-25T09:06:02.475697246Z',
      _time: '2025-04-25T09:06:01.456Z',
      data: {
        'attributes.custom': {
          'usage.completionTokens': 804,
          'usage.promptTokens': 41573,
          'usage.totalTokens': 42377,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'stop',
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '68.711µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: 'ce83c3cbc478179c',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '627638d19caf007502a509f85bcd778b',
        trace_state: null,
        totalTokens: 42377,
        completionTokens: 804,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9flmr340l6o-07d1d83cd8003313-0000af2b',
      _id: '6868665bc042a514ac9273a6e7b62c22-47',
      _sysTime: '2025-04-25T09:06:45.420187121Z',
      _time: '2025-04-25T09:06:41.541Z',
      data: {
        'attributes.custom': {
          'usage.promptTokens': 41709,
          'usage.totalTokens': 41789,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'stop',
          'usage.completionTokens': 80,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '151.37µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: 'ff1d5c5d715338e8',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: 'b63c3470263fc9c20c46533865c0349f',
        trace_state: null,
        totalTokens: 41789,
        completionTokens: 80,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9flmxdja8e8-07d1d83cd8003313-0000af2d',
      _id: '6868665bc042a514ac9273a6e7b62c22-48',
      _sysTime: '2025-04-25T09:06:57.176428022Z',
      _time: '2025-04-25T09:06:55.232Z',
      data: {
        'attributes.custom': {
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'stop',
          'usage.completionTokens': 365,
          'usage.promptTokens': 41743,
          'usage.totalTokens': 42108,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '29.195µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: 'ebfb47a339822f80',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: 'bec592d9f3b3a2e92ccd40c3e5274874',
        trace_state: null,
        totalTokens: 42108,
        completionTokens: 365,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9flo976by2o-07d1d83cd8003313-0000af3e',
      _id: '6868665bc042a514ac9273a6e7b62c22-49',
      _sysTime: '2025-04-25T09:08:39.844281434Z',
      _time: '2025-04-25T09:08:39.333Z',
      data: {
        'attributes.custom': {
          'usage.promptTokens': 38478,
          'usage.totalTokens': 38575,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'stop',
          'usage.completionTokens': 97,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '24.87µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '8f031cf91411ff19',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '7e4d53ca4ef764493c5cf019828e53e0',
        trace_state: null,
        totalTokens: 38575,
        completionTokens: 97,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fm4tim62m8-07d1f3c712005ad5-00009f35',
      _id: '6868665bc042a514ac9273a6e7b62c22-50',
      _sysTime: '2025-04-25T09:30:17.902863997Z',
      _time: '2025-04-25T09:30:17.387Z',
      data: {
        'attributes.custom': {
          'usage.totalTokens': 42978,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'stop',
          'usage.completionTokens': 5635,
          'usage.promptTokens': 37343,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '25.864µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '4bf696934c8257c5',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: '959e93256df281698a505ee429d7219c',
        trace_state: null,
        totalTokens: 42978,
        completionTokens: 5635,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fm6i1xlncw-07d1cdd4f8001c70-0000b658',
      _id: '6868665bc042a514ac9273a6e7b62c22-51',
      _sysTime: '2025-04-25T09:32:29.673638542Z',
      _time: '2025-04-25T09:32:29.162Z',
      data: {
        'attributes.custom': {
          'usage.promptTokens': 37243,
          'usage.totalTokens': 46395,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'stop',
          'usage.completionTokens': 9152,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '28.08µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: '9a26b3bead917919',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: 'd9f9e5dcbe1b6394ad444d950def323d',
        trace_state: null,
        totalTokens: 46395,
        completionTokens: 9152,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
    {
      _rowId: '0d9fm75c653nk-07d1cdd4f8001c70-0000b662',
      _id: '6868665bc042a514ac9273a6e7b62c22-52',
      _sysTime: '2025-04-25T09:33:20.593504546Z',
      _time: '2025-04-25T09:33:19.847Z',
      data: {
        'attributes.custom': {
          'usage.promptTokens': 42051,
          'usage.totalTokens': 45046,
          chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
          finishReason: 'stop',
          'usage.completionTokens': 2995,
        },
        'attributes.http.method': null,
        'attributes.http.route': null,
        'attributes.http.scheme': null,
        'attributes.http.status_code': null,
        'attributes.http.target': null,
        'attributes.http.url': null,
        'attributes.http.user_agent': null,
        'attributes.net.peer.name': null,
        'attributes.net.peer.port': null,
        duration: '71.91µs',
        error: null,
        events: null,
        kind: 'internal',
        name: 'on-finish-handler',
        parent_span_id: null,
        'resource.custom': null,
        'scope.name': 'ai',
        'scope.version': null,
        'service.name': 'unknown_service:node',
        'service.version': null,
        span_id: 'c283ca6a97942c72',
        'status.code': null,
        'status.message': null,
        'telemetry.sdk.language': 'nodejs',
        'telemetry.sdk.name': 'opentelemetry',
        'telemetry.sdk.version': '2.0.0',
        trace_id: 'e2c06f6face471b3e869e54c7c427e71',
        trace_state: null,
        totalTokens: 45046,
        completionTokens: 2995,
        chatInitialId: '9a528d5b-3ef3-45b2-9173-92fb171613c7',
      },
    },
  ],
  queryMeta: {
    aggregations: [],
    startTime: '2025-04-25T03:57:56-04:00',
    endTime: '2025-04-25T09:57:56-04:00',
    resolution: '',
    groupBy: [],
    fields: [
      {
        alias: '_sysTime',
        field: '_sysTime',
      },
      {
        alias: '_time',
        field: '_time',
      },
      {
        alias: 'attributes.custom',
        field: 'attributes.custom',
      },
      {
        alias: 'attributes.http.method',
        field: 'attributes.http.method',
      },
      {
        alias: 'attributes.http.route',
        field: 'attributes.http.route',
      },
      {
        alias: 'attributes.http.scheme',
        field: 'attributes.http.scheme',
      },
      {
        alias: 'attributes.http.status_code',
        field: 'attributes.http.status_code',
      },
      {
        alias: 'attributes.http.target',
        field: 'attributes.http.target',
      },
      {
        alias: 'attributes.http.url',
        field: 'attributes.http.url',
      },
      {
        alias: 'attributes.http.user_agent',
        field: 'attributes.http.user_agent',
      },
      {
        alias: 'attributes.net.peer.name',
        field: 'attributes.net.peer.name',
      },
      {
        alias: 'attributes.net.peer.port',
        field: 'attributes.net.peer.port',
      },
      {
        alias: 'duration',
        field: 'duration',
      },
      {
        alias: 'error',
        field: 'error',
      },
      {
        alias: 'events',
        field: 'events',
      },
      {
        alias: 'kind',
        field: 'kind',
      },
      {
        alias: 'name',
        field: 'name',
      },
      {
        alias: 'parent_span_id',
        field: 'parent_span_id',
      },
      {
        alias: 'resource.custom',
        field: 'resource.custom',
      },
      {
        alias: 'scope.name',
        field: 'scope.name',
      },
      {
        alias: 'scope.version',
        field: 'scope.version',
      },
      {
        alias: 'service.name',
        field: 'service.name',
      },
      {
        alias: 'service.version',
        field: 'service.version',
      },
      {
        alias: 'span_id',
        field: 'span_id',
      },
      {
        alias: 'status.code',
        field: 'status.code',
      },
      {
        alias: 'status.message',
        field: 'status.message',
      },
      {
        alias: 'telemetry.sdk.language',
        field: 'telemetry.sdk.language',
      },
      {
        alias: 'telemetry.sdk.name',
        field: 'telemetry.sdk.name',
      },
      {
        alias: 'telemetry.sdk.version',
        field: 'telemetry.sdk.version',
      },
      {
        alias: 'trace_id',
        field: 'trace_id',
      },
      {
        alias: 'trace_state',
        field: 'trace_state',
      },
      {
        alias: 'totalTokens',
        field: 'totalTokens',
      },
      {
        alias: 'completionTokens',
        field: 'completionTokens',
      },
      {
        alias: 'chatInitialId',
        field: 'chatInitialId',
      },
    ],
    order: [],
    searchArgs: [],
    queryOptions: {
      aggChartOpts: '{"sum_completionTokens":{}}',
      caseSensitive: 'true',
      containsTimeFilter: 'false',
      editorContent:
        "flex\n| extend completionTokens = toint(['attributes.custom']['usage.completionTokens'])\n| extend chatInitialId = tostring(['attributes.custom']['chatInitialId'])\n| where chatInitialId == '9a528d5b-3ef3-45b2-9173-92fb171613c7'",
      openIntervals: 'shown',
      quickRange: '6h',
      shownColumns: '["totalTokens","attributes.custom","chatInitialId"]',
    },
  },
  status: {
    elapsedTime: 204032,
    minCursor: '0d9doa96z4urk-07d1cdd4f8001c70-00000000',
    maxCursor: '0d9frtpwmqpts-07d1cdd4f8001c70-0000c4a4',
    blocksExamined: 3,
    blocksCached: 0,
    blocksMatched: 0,
    blocksSkipped: 0,
    rowsExamined: 143090,
    rowsMatched: 53,
    numGroups: 0,
    isPartial: false,
    cacheStatus: 9,
    minBlockTime: '2025-04-23T02:46:05.639Z',
    maxBlockTime: '2025-04-25T13:57:54.181Z',
  },
  lastRun: '2025-04-25T13:57:57.151Z',
  valueFormatters: {
    fields: {},
    cols: {},
  },
};

type AxiomMatch = {
  _rowId: string;
  _id: string;
  _sysTime: string;
  _time: string;
  data: {
    'attributes.custom': {
      'usage.promptTokens': number;
      'usage.totalTokens': number;
      chatInitialId: string;
      finishReason: string;
      'usage.completionTokens': number;
    };
  };
};
type RawAxiomJson = {
  matches: AxiomMatch[];
};

function getUsageData(matches: AxiomMatch[]) {}

// Currently completely copied from app/lib/.server/usage.ts -- should be split into
// a package to be shareable
export async function recordUsage(
  provisionHost: string,
  token: string,
  teamSlug: string,
  deploymentName: string | undefined,
  lastMessage: Message | undefined,
  finalGeneration: { usage: LanguageModelUsage; providerMetadata?: ProviderMetadata },
) {
  const totalUsage = usageFromGeneration(finalGeneration);

  const failedToolCalls: Set<string> = new Set();
  for (const part of lastMessage?.parts ?? []) {
    if (part.type !== 'tool-invocation') {
      continue;
    }
    if (part.toolInvocation.state === 'result' && part.toolInvocation.result.startsWith('Error:')) {
      failedToolCalls.add(part.toolInvocation.toolCallId);
    }
  }

  if (lastMessage && lastMessage.role === 'assistant') {
    for (const annotation of lastMessage.annotations ?? []) {
      const parsed = annotationValidator.safeParse(annotation);
      if (!parsed.success) {
        console.error('Invalid annotation', parsed.error);
        continue;
      }
      if (parsed.data.type !== 'usage') {
        continue;
      }
      let payload: UsageAnnotation;
      try {
        payload = usageAnnotationValidator.parse(JSON.parse(parsed.data.usage.payload));
      } catch (e) {
        console.error('Invalid payload', parsed.data.usage.payload, e);
        continue;
      }
      if (payload.toolCallId && failedToolCalls.has(payload.toolCallId)) {
        console.warn('Skipping usage for failed tool call', payload.toolCallId);
        continue;
      }
      totalUsage.completionTokens += payload.completionTokens;
      totalUsage.promptTokens += payload.promptTokens;
      totalUsage.totalTokens += payload.totalTokens;
      totalUsage.anthropicCacheCreationInputTokens +=
        payload.providerMetadata?.anthropic?.cacheCreationInputTokens ?? 0;
      totalUsage.anthropicCacheReadInputTokens += payload.providerMetadata?.anthropic?.cacheReadInputTokens ?? 0;
      totalUsage.openaiCachedPromptTokens += payload.providerMetadata?.openai?.cachedPromptTokens ?? 0;
      totalUsage.xaiCachedPromptTokens += payload.providerMetadata?.xai?.cachedPromptTokens ?? 0;
    }
  }

  const Authorization = `Bearer ${token}`;
  const url = `${provisionHost}/api/dashboard/teams/${teamSlug}/usage/record_tokens`;
  // https://www.notion.so/convex-dev/Chef-Pricing-1cfb57ff32ab80f5aa2ecf3420523e2f
  const chefTokens = calculateChefTokens(totalUsage, finalGeneration.providerMetadata);
  logger.info('Logging total usage', JSON.stringify(totalUsage), 'corresponding to chef tokens', chefTokens);
  const response = await fetch(url, {
    method: 'POST',
    headers: {
      Authorization,
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      centitokens: chefTokens,
    }),
  });
  if (!response.ok) {
    logger.error('Failed to record usage', response);
    logger.error(await response.json());
  }

  const { centitokensUsed, centitokensQuota } = await response.json();
  logger.info(`${teamSlug}/${deploymentName}: Tokens used: ${centitokensUsed} / ${centitokensQuota}`);
}

// TODO this these wrong
// Based on how the final generation came from (which may not be the provided used for the other generations came from)
export function calculateChefTokens(totalUsage: Usage, providerMetadata?: ProviderMetadata) {
  let chefTokens = 0;
  if (providerMetadata?.anthropic) {
    chefTokens += totalUsage.completionTokens * 200;
    chefTokens += totalUsage.promptTokens * 40;
    chefTokens += totalUsage.anthropicCacheCreationInputTokens * 40 + totalUsage.anthropicCacheReadInputTokens * 3;
  } else if (providerMetadata?.openai) {
    chefTokens += totalUsage.completionTokens * 100;
    chefTokens += totalUsage.openaiCachedPromptTokens * 5;
    chefTokens += (totalUsage.promptTokens - totalUsage.openaiCachedPromptTokens) * 26;
  } else if (providerMetadata?.xai) {
    // TODO: This is a guess. Billing like openai
    chefTokens += totalUsage.completionTokens * 200;
    chefTokens += totalUsage.promptTokens * 40;
    // TODO - never seen xai set this field to anything but 0, so holding off until we understand.
    //chefTokens += totalUsage.xaiCachedPromptTokens * 3;
  } else if (providerMetadata?.google) {
    chefTokens += totalUsage.completionTokens * 140;
    chefTokens += totalUsage.promptTokens * 18;
    // TODO: Implement Google billing for the prompt tokens that are cached. Google doesn't offer caching yet.
  } else {
    console.error('WARNING: Unknown provider. Not recording usage. Giving away for free.', providerMetadata);
  }
  return chefTokens;
}
